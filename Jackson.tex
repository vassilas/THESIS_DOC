\section{Παραγοντοποίηση Jackson}

Στο παρόν κεφάλαιο θα παρουσιάσουμε μια μέθοδο επιπλέον παραγοντοποίησης 
για τον υπολογισμό του κρατουμένου , η οποία προτάθηκε από τους Jackson και 
Tawlar \cite{jackson}. Με την συγκεκριμένη τεχνική δεν μειώνεται μόνο
η πολυπλοκότητα του πρώτου δέντρου προθεμάτων αλλά σε όλα τα επίπεδα.
Ουσιαστικά στο κεφάλαιο αυτό θα παρουσιάσουμε την γενίκευση της 
παραγοντοποίησης που προτάθηκε παραπάνω.

Στις παρακάτω εξισώσεις παραγοντοποιούμε την εξίσωση υπολογισμού κρατουμένου.
Στην πρώτη παραγοντοποίηση αναφερθήκαμε στην προηγούμενη ενότητα (Ling),
οι επόμενες δύο επιφέρουν επιπλέον παραγοντοποίηση της αρχικής συνάρτησης. 
\begin{equation}
\begin{split}
    G_{4:0} &= g_4 + p_4    g_3 + p_4p_3g_2 + p_4p_3p_2g_1 + p_4p_3p_2p_1g_0 \\
            &= \Big[p_4\Big]\Big[g_4 + g_3 +p_3g_2 + p_3p_2g_1 + p_3p_2p_1g_0\Big] \\
            &=\Big[g_4 + p_4p_3\Big]\Big[g_4 + g_3 + g_2 + p_2g_1 + p_2p_1g_0\Big] \\
            &= \Big[g_4 +  p_4g_3 + p_4p_3p_2 \Big]\Big[ g_4 + g_3 + g_2 + g_1 + p_1g_0 \Big]
\end{split}
\end{equation}

Στην συνέχεια θα γενικεύσουμε αυτές τις παραγοντοποιήσεις και επιπλέον
θα δείξουμε τεχνικές μείωσης πολυπλοκότητας και στα επιμέρους τμήματα
τις παραπάνω εξίσωσης μέσα στις αγκύλες. Θα ονομάσουμε αυτή την γενίκευση 
ως Jackson παραγοντοποίηση.





\subsection{Βασικοί Όροι}


Αρχικά ο Jackson ορίζει δυο βοηθητικά σήματα τα D και B,
όπου το σήμα $D_{i:j}$ είναι αληθές όταν η ομάδα δυαδικών ψηφίων των 
σημάτων εισόδου από τα ψηφία $a_i,b_i$ έως τα $a_j,b_j$ παράγουν κρατούμενο
εξόδου ή διαδίδουν το κρατούμενο εισόδου,
\begin{equation}
\begin{split}
    D_{i:k} &= G_{j:k} + P_{j:k}\\
            &= G_{j:k+1} + P_{j:k}
\end{split}
\end{equation}
ενώ το σήμα $B_{i:j}$ αληθεύει όταν 
έστω ένα ζευγάρι $(a_k,b_k)$ παράγει κρατούμενο

\begin{equation}
\begin{split}
    B_{i:j} = g_i + g_{i-1} + ... + g_j
\end{split}
\end{equation}


Γνωρίζοντας τα παραπάνω σήματα μπορούμε να εκφράσουμε πλέων την βασική 
παραγοντοποίηση του υπολογισμού του κρατουμένου εξόδου
που συστήνεται από τον Jackson 

\begin{equation}
    G_{j:i} = D_{j:k} \Big[B_{j:k}+G_{k-1:i}\Big]
\end{equation}

Από την παραπάνω εξίσωση το τμήμα μέσα στις αγκύλες ορίζεται ως 
$R^{j-k+1}_{j:i}$ 
\begin{equation}
\begin{split}
    R^{j-k+1}_{j:i} &= B_{j:k}+G_{k-1:i}\\
    R^{n-m}_{n-1:j} &= B_{n-1:m} + G_{m-1:j}\\
    R^p_{i:j} &= B_{i:i-p+1}+G_{i-p:j}  
\end{split}
\end{equation}
οπού η υπογεγραμμένη αναφέρεται στην ομάδα των
δυαδικών ψηφίων εισόδου και το υπερκείμενο στο πλήθος των ψηφίων
που δέχεται σαν είσοδο το σήμα $B$. Έτσι η παραπάνω εξίσωση παίρνει
την παρακάτω μορφή
\begin{equation}
    G_{j:i} = D_{j:k} R^{j-k+1}_{j:i}
\end{equation}

Πρέπει να σημειώσουμε πως στην περίπτωση που $j=k$ στην παραπάνω περίπτωση 
τότε περιγράφουμε την παραγοντοποίηση που παρουσιάσαμε στο προηγούμενο
κεφάλαιο όπως είχε οριστεί από τον Ling.













\subsection{Αναδρομή του Jackson }

Βασικό πλεονέκτημα των αθροιστών προθέματος είναι η ανάδραση , όπου όπως 
έχει προαναφερθεί το κρατούμενο εξόδου μίας ομάδας δυαδικών ψηφίων μπορεί
να παραχθεί υπολογίζοντας επιμέρους μικρότερες υποομάδες αυτού του συνόλου.
Παρακάτω θα αποδειχθεί πως και το σήμα R που ορίστηκε παραπάνω έχει 
επίσης αυτή την ιδιότητα.

Θα κατασκευάσουμε το σήμα $R_{n-1:0}$ με είσοδο n δυαδικά ψηφία συνδυάζοντας
υποομάδες αυτού του συνόλου χωρίζοντας το σε τρία, ίσου μεγέθους διαμερίσματα
, τις υποομάδες bits εισόδου $n-1:k , k-1:j$ και $j-1:0$. Επίσης θα επιλέξουμε
και τα m και v ως τα μεσαία στοιχεία των δύο τελευταίων διαστημάτων.
 

Αρχίζοντας με την εξίσωση του R που θέλουμε να παράξουμε 
\begin{equation*}
    R^{n-m}_{n-1:0} = B_{n-1:m} + G_{m-1:0}
\end{equation*}

χρησιμοποιώντας την εξίσωση αναδρομής του G έχουμε

\begin{equation*}
    R^{n-m}_{n-1:0} = B_{n-1:m} + G_{m-1:j} + P_{m-1:j}G_{j-1:0}
\end{equation*}

επίσης σπάμε το B σε δυο σήματα και έχουμε

\begin{equation*}
    R^{n-m}_{n-1:0} = [ B_{n-1:k} ] + [ B_{k-1:m} + G_{m-1:j} ] + P_{m-1:j}G_{j-1:0}
\end{equation*}

Ήδη οι πρώτοι δυο όροι που έχουν εμφανιστεί μέσα στις αγκύλες σχηματίζουν τα 
σήματα R από υποομάδες , κατασκευάζοντας και τον τελευταίο όρο, εφαρμόζοντας την
εξίσωση του G που παρουσιάσαμε παραπάνω, έχουμε

\begin{equation*}
    R^{n-m}_{n-1:0} = [ B_{n-1:k} ] + [ B_{k-1:m} + G_{m-1:j} ] + [ P_{m-1:j}D_{j-1:v} ][B_{j-1:v}+G_{v-1:0}]
\end{equation*}

Οπότε η τελική εξίσωση είναι 

\begin{equation}
    R^{n-m}_{n-1:0} = R^{n-k}_{n-1:k} + R^{k-m}_{k-1:j} + [ P_{m-1:j}D_{j-1:v} ]R^{j-v}_{j-1:0}
\end{equation}

Για περισσότερη ευκολία στις παρακάτω εξισώσεις θα ορίσουμε και το σήμα Q 
το οποίο είναι το σήμα μέσα στις αγκύλες στην εξίσωση παραπάνω 

\begin{equation}
    Q^{n-m}_{n-1:k} = P_{n-1:m}D_{m-1:k}
\end{equation}

Μεχρι στιγμής έχουμε αποδειξει πως το σήμα R ενός συνόλου δυαδικών ψηφίων
μπορεί να υπολογιστεί από τα σήματα R μικρότερων υποομάδων. Πρέπει
να τονίσουμε πως υπάρχουν πολλοί διαφορετικοί συνδιασμοί και τύποι, που υλοποιούν 
τον αναδρομικό υπολογισμό, οι οποίοι θα παρουσιαστούν σε παρακάτω κεφάλαιο. 
Παρακάτω θα δείξουμε πως και το σήμα Q υπολογίζεται αναδρομικά, αφού πρώτα παρουσιάσουμε τον 
αναδρομικό υπολογισμό του σήματος D με τους παρακάτω δύο τύπους 
\begin{equation}
\begin{split}
    D_{j:i} &= D_{j:k}[ B_{j:k} + D_{k-1:i} ] \\
    D_{j:i} &= G_{j:k} + P_{j:k}D_{k-1:i}
\end{split}
\end{equation}

Με την ιδια λογική που ακολουθήσαμε προηγουμένως θα υποδείξουμε πώς υπολογίζεται 
αναδρομικά το σήμα Q με είσοδο το σύνολο των bits $n-1:0$.
Χωρίζουμε το σύνολο σε τρία διαμερίσματα $n-1:k , k-1:j$ και $j-1:0$, ομοίως επιλέγουμε
τα μεσαία στοιχεία των τελευταίων δύο υποομάδων m και v αντίστοιχα. Ξεκινώντας από την
εξίσωση του σήματος Q που παρουσιάσαμε παραπάνω, αρχικά κάνουμε χρήση της 
πρώτης εξίσωσης από τις παραπάνω δυο αναδρομικές συναρτήσεις του D, ενω παράλληλα
σπάμε το σήμα P, και έχουμε
\begin{equation*}
\begin{split}
    Q^{n-m}_{n-1:0} &= P_{n-1:m}D_{m-1:0}\\
    Q^{n-m}_{n-1:0} &= P_{n-1:m}D_{m-1:j}[B_{m-1:j}+D_{j-1:0}] \\
    Q^{n-m}_{n-1:0} &= P_{n-1:k}[P_{k-1:m}D_{m-1:j}][B_{m-1:j}+D_{j-1:0}]
\end{split}
\end{equation*}
Σε αυτό το σημείο μέσα στις δύο πρώτες αγκύλες έχουμε ήδη χτίσει τα Q
των πρώτων δύο υποσυνόλων, για να παράξουμε και το τρίτο στην τελευταία αγκύλη
θα κάνουμε χρήση της δεύτερης εξίσωσης από τις από τις δυο αναδρομικές συναρτήσεις του D
\begin{equation*}
    Q^{n-m}_{n-1:0} = P_{n-1:k}[P_{k-1:m}D_{m-1:j}][B_{m-1:j}+G_{j-1:v}+P_{j-1:v}D_{v-1:0}]
\end{equation*}
Αντικαθιστώντας στην παραπάνω εξίσωση αντίστοιχα σήματα R και Q έχουμε την τελική 
μορφή της αναδρομικής συνάρτησης 
\begin{equation}
    Q^{n-m}_{n-1:0} = Q^{n-k}_{n-1:k}Q^{k-m}_{k-1:j}[R^{m-j}_{m-1:v}+Q^{j-v}_{j-1:0}]
\end{equation}







\subsection{Εφαρμογές της αναδρομής}
Όπως προαναφέρθηκε παραπάνω υπάρχουν διάφορες υλοποιήσεις της αναδρομής ακόμα και με 
ίδιο αριθμό υποομάδων \cite{neil_burgess} σε αντίθεση με τις απλές αναδρομές των αθροιστών προθέματος.
Παρακάτω θα παρουσιαστούν όλες οι πιθανές μορφές των σημάτων R και Q με πλήθος υποομάδων
δύο έως τέσσερα.
\\\\\\
\textcolor{red}{[Implementation of Recursive Ling Adders in CMOS VLSI \\by Neil Burgess]}
\\\\\\
Παρατηρείται πως όταν απλοποιείται η υλοποίηση του σήματος R τότε επιβαρύνεται η υλοποίηση του Q




\subsection{Παράδειγμα υλοποίησης}
Με σκοπό την πλήρη κατανόηση της δομής που περιγράφηκε για τον υπολογισμό του κρατουμένου,
σε αυτή την παράγραφο θα αναπτυχθεί ένας αθροιστής των 18 δυαδικών ψηφίων  
\\\\\\
\textcolor{red}{[Δημιουργία Jackson αθροιστή]}

\subsection{Αραίωση σε Jackson Αρχιτεκτονικές}
Sparsness-2
 \begin{equation*}
    \begin{split}
        sum_i &= x_i \oplus G_{i-1:0}\\
        sum_i &= x_i \oplus D_{i-1:k}R^{i-k}_{i-1:0}\\
        sum_i &= R^{i-k}_{i-1:0} ? x_i \oplus D_{i-1:k} : x_i\\
        sum_{i+1} &= x_{i+1} \oplus G_{i:0}\\
        sum_{i+1} &= x_{i+1} \oplus (g_i + p_i*G_{i-1:0})\\
        sum_{i+1} &= x_{i+1} \oplus (g_i + p_i*D_{i-1:k}R^{i-k}_{i-1:0})\\
        sum_{i+1} &= R^{i-k}_{i-1:0} ? x_{i+1} \oplus (g_i + p_i*D_{i-1:k}) : x_{i+1} \oplus g_i
    \end{split} 
 \end{equation*}






